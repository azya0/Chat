FROM node

COPY . ./client

WORKDIR ./client

ARG REACT_APP_SERVER_PROTOCOL
ARG REACT_APP_SERVER_HOST
ARG REACT_APP_SERVER_PORT

ENV REACT_APP_SERVER_PROTOCOL $REACT_APP_SERVER_PROTOCOL
ENV REACT_APP_SERVER_HOST $REACT_APP_SERVER_HOST
ENV REACT_APP_SERVER_PORT $REACT_APP_SERVER_PORT

RUN npm run build

RUN npm install -g serve
