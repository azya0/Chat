{"ast":null,"code":"import axios from \"axios\";\nimport Cookies from 'js-cookie';\nimport { setUser } from \"./current_user\";\nasync function GetToken(email, password) {\n  const params = new URLSearchParams({\n    'username': email,\n    'password': password\n  });\n  try {\n    let response = await axios.post('http://localhost:443/auth/jwt/login', params);\n    return response.data;\n  } catch (error) {\n    console.log(error);\n  }\n}\n_c = GetToken;\nasync function setCurrentUser(email, password) {\n  function auth_headers() {\n    return Cookies.get('access_token') !== null ? {\n      headers: `Authorization: ${Cookies.get('token_type')} ${Cookies.get('access_token')}`\n    } : {};\n  }\n  try {\n    const data = await GetToken(email, password);\n    for (const [key, value] of Object.entries(data)) {\n      Cookies.set(key, value);\n    }\n    const response = await axios.get('http://localhost:443/users/me', auth_headers());\n    setUser(response.data);\n  } catch (error) {\n    console.log(error);\n  }\n}\nexport default setCurrentUser;\nvar _c;\n$RefreshReg$(_c, \"GetToken\");","map":{"version":3,"names":["axios","Cookies","setUser","GetToken","email","password","params","URLSearchParams","response","post","data","error","console","log","_c","setCurrentUser","auth_headers","get","headers","key","value","Object","entries","set","$RefreshReg$"],"sources":["C:/Users/Азя/WebstormProjects/chat/src/functions/auth_user.js"],"sourcesContent":["import axios from \"axios\";\r\nimport Cookies from 'js-cookie';\r\n\r\nimport {setUser} from \"./current_user\";\r\n\r\nasync function GetToken(email, password) {\r\n    const params = new URLSearchParams({ 'username': email, 'password': password });\r\n\r\n    try {\r\n        let response = await axios.post('http://localhost:443/auth/jwt/login', params);\r\n        return response.data;\r\n    }\r\n    catch (error) {\r\n        console.log(error);\r\n    }\r\n}\r\n\r\nasync function setCurrentUser(email, password) {\r\n    function auth_headers() {\r\n        return (Cookies.get('access_token') !== null) ? {\r\n            headers: `Authorization: ${Cookies.get('token_type')} ${Cookies.get('access_token')}`\r\n        } : {};\r\n    }\r\n\r\n    try {\r\n        const data = await GetToken(email, password);\r\n\r\n        for (const [key, value] of Object.entries(data)) {\r\n            Cookies.set(key, value);\r\n        }\r\n\r\n        const response = await axios.get('http://localhost:443/users/me', auth_headers());\r\n\r\n        setUser(response.data);\r\n    }\r\n    catch (error) {\r\n        console.log(error);\r\n    }\r\n}\r\n\r\nexport default setCurrentUser;\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,OAAO,MAAM,WAAW;AAE/B,SAAQC,OAAO,QAAO,gBAAgB;AAEtC,eAAeC,QAAQA,CAACC,KAAK,EAAEC,QAAQ,EAAE;EACrC,MAAMC,MAAM,GAAG,IAAIC,eAAe,CAAC;IAAE,UAAU,EAAEH,KAAK;IAAE,UAAU,EAAEC;EAAS,CAAC,CAAC;EAE/E,IAAI;IACA,IAAIG,QAAQ,GAAG,MAAMR,KAAK,CAACS,IAAI,CAAC,qCAAqC,EAAEH,MAAM,CAAC;IAC9E,OAAOE,QAAQ,CAACE,IAAI;EACxB,CAAC,CACD,OAAOC,KAAK,EAAE;IACVC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;EACtB;AACJ;AAACG,EAAA,GAVcX,QAAQ;AAYvB,eAAeY,cAAcA,CAACX,KAAK,EAAEC,QAAQ,EAAE;EAC3C,SAASW,YAAYA,CAAA,EAAG;IACpB,OAAQf,OAAO,CAACgB,GAAG,CAAC,cAAc,CAAC,KAAK,IAAI,GAAI;MAC5CC,OAAO,EAAG,kBAAiBjB,OAAO,CAACgB,GAAG,CAAC,YAAY,CAAE,IAAGhB,OAAO,CAACgB,GAAG,CAAC,cAAc,CAAE;IACxF,CAAC,GAAG,CAAC,CAAC;EACV;EAEA,IAAI;IACA,MAAMP,IAAI,GAAG,MAAMP,QAAQ,CAACC,KAAK,EAAEC,QAAQ,CAAC;IAE5C,KAAK,MAAM,CAACc,GAAG,EAAEC,KAAK,CAAC,IAAIC,MAAM,CAACC,OAAO,CAACZ,IAAI,CAAC,EAAE;MAC7CT,OAAO,CAACsB,GAAG,CAACJ,GAAG,EAAEC,KAAK,CAAC;IAC3B;IAEA,MAAMZ,QAAQ,GAAG,MAAMR,KAAK,CAACiB,GAAG,CAAC,+BAA+B,EAAED,YAAY,CAAC,CAAC,CAAC;IAEjFd,OAAO,CAACM,QAAQ,CAACE,IAAI,CAAC;EAC1B,CAAC,CACD,OAAOC,KAAK,EAAE;IACVC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;EACtB;AACJ;AAEA,eAAeI,cAAc;AAAC,IAAAD,EAAA;AAAAU,YAAA,CAAAV,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}