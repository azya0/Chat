{"ast":null,"code":"import axios from \"axios\";\nimport requestConfig from \"./request_config\";\nimport { setUser } from \"./current_user\";\nasync function GetToken(email, password) {\n  const params = new URLSearchParams({\n    'username': email,\n    'password': password\n  });\n  try {\n    let response = await axios.post('http://localhost:443/auth/jwt/login', params);\n    return response.data;\n  } catch (error) {\n    console.log(error);\n  }\n}\n_c = GetToken;\nfunction setCurrentUser(email, password, cookies) {\n  GetToken(email, password).then(data => {\n    for (const [key, value] of Object.entries(data)) {\n      cookies[1](key, value, {\n        path: \"/\"\n      });\n      console.log(`!${cookies[0]}`);\n    }\n    console.log(cookies[0]);\n    axios.get('http://localhost:443/users/me', requestConfig(cookies[0])).then(response => {\n      setUser(response.data);\n    }).catch(error => {\n      alert(`Ошибка. ${error.response.data['detail']}`);\n    });\n  }).catch(error => {\n    alert(`Ошибка. ${error.response.data['detail']}`);\n  });\n}\nexport default setCurrentUser;\nvar _c;\n$RefreshReg$(_c, \"GetToken\");","map":{"version":3,"names":["axios","requestConfig","setUser","GetToken","email","password","params","URLSearchParams","response","post","data","error","console","log","_c","setCurrentUser","cookies","then","key","value","Object","entries","path","get","catch","alert","$RefreshReg$"],"sources":["C:/Users/Азя/WebstormProjects/chat/src/hooks/auth_user.js"],"sourcesContent":["import axios from \"axios\";\r\nimport requestConfig from \"./request_config\";\r\nimport {setUser} from \"./current_user\";\r\n\r\nasync function GetToken(email, password) {\r\n    const params = new URLSearchParams({ 'username': email, 'password': password });\r\n\r\n    try {\r\n        let response = await axios.post('http://localhost:443/auth/jwt/login', params);\r\n        return response.data;\r\n    }\r\n    catch (error) {\r\n        console.log(error);\r\n    }\r\n}\r\n\r\nfunction setCurrentUser(email, password, cookies) {\r\n    GetToken(email, password).then((data) => {\r\n        for (const [key, value] of Object.entries(data)) {\r\n            cookies[1](key, value, { path: \"/\" });\r\n            console.log(`!${cookies[0]}`);\r\n        }\r\n\r\n        console.log(cookies[0]);\r\n\r\n        axios.get('http://localhost:443/users/me', requestConfig(cookies[0])).then((response) => {\r\n            setUser(response.data);\r\n        }).catch((error) => {\r\n            alert(`Ошибка. ${error.response.data['detail']}`);\r\n        })\r\n    }).catch((error) => {\r\n        alert(`Ошибка. ${error.response.data['detail']}`);\r\n    });\r\n}\r\n\r\nexport default setCurrentUser;\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,aAAa,MAAM,kBAAkB;AAC5C,SAAQC,OAAO,QAAO,gBAAgB;AAEtC,eAAeC,QAAQA,CAACC,KAAK,EAAEC,QAAQ,EAAE;EACrC,MAAMC,MAAM,GAAG,IAAIC,eAAe,CAAC;IAAE,UAAU,EAAEH,KAAK;IAAE,UAAU,EAAEC;EAAS,CAAC,CAAC;EAE/E,IAAI;IACA,IAAIG,QAAQ,GAAG,MAAMR,KAAK,CAACS,IAAI,CAAC,qCAAqC,EAAEH,MAAM,CAAC;IAC9E,OAAOE,QAAQ,CAACE,IAAI;EACxB,CAAC,CACD,OAAOC,KAAK,EAAE;IACVC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;EACtB;AACJ;AAACG,EAAA,GAVcX,QAAQ;AAYvB,SAASY,cAAcA,CAACX,KAAK,EAAEC,QAAQ,EAAEW,OAAO,EAAE;EAC9Cb,QAAQ,CAACC,KAAK,EAAEC,QAAQ,CAAC,CAACY,IAAI,CAAEP,IAAI,IAAK;IACrC,KAAK,MAAM,CAACQ,GAAG,EAAEC,KAAK,CAAC,IAAIC,MAAM,CAACC,OAAO,CAACX,IAAI,CAAC,EAAE;MAC7CM,OAAO,CAAC,CAAC,CAAC,CAACE,GAAG,EAAEC,KAAK,EAAE;QAAEG,IAAI,EAAE;MAAI,CAAC,CAAC;MACrCV,OAAO,CAACC,GAAG,CAAE,IAAGG,OAAO,CAAC,CAAC,CAAE,EAAC,CAAC;IACjC;IAEAJ,OAAO,CAACC,GAAG,CAACG,OAAO,CAAC,CAAC,CAAC,CAAC;IAEvBhB,KAAK,CAACuB,GAAG,CAAC,+BAA+B,EAAEtB,aAAa,CAACe,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAACC,IAAI,CAAET,QAAQ,IAAK;MACrFN,OAAO,CAACM,QAAQ,CAACE,IAAI,CAAC;IAC1B,CAAC,CAAC,CAACc,KAAK,CAAEb,KAAK,IAAK;MAChBc,KAAK,CAAE,WAAUd,KAAK,CAACH,QAAQ,CAACE,IAAI,CAAC,QAAQ,CAAE,EAAC,CAAC;IACrD,CAAC,CAAC;EACN,CAAC,CAAC,CAACc,KAAK,CAAEb,KAAK,IAAK;IAChBc,KAAK,CAAE,WAAUd,KAAK,CAACH,QAAQ,CAACE,IAAI,CAAC,QAAQ,CAAE,EAAC,CAAC;EACrD,CAAC,CAAC;AACN;AAEA,eAAeK,cAAc;AAAC,IAAAD,EAAA;AAAAY,YAAA,CAAAZ,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}