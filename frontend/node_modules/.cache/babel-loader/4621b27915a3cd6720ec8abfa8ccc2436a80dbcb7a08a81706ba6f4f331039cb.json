{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/\\u0410\\u0437\\u044F/Desktop/chat/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/\\u0410\\u0437\\u044F/Desktop/chat/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/\\u0410\\u0437\\u044F/Desktop/chat/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{Navigate}from\"react-router-dom\";import axios from\"axios\";import{auth_headers,clearCurrentUser,currentUser,currentUserExist}from\"../../controllers/userController\";import styles from'../../css/index.module.css';import SelectChat from\"./MainSelectChat\";import config from\"../../config\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function Main(){var user=currentUser();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),chats=_useState2[0],setChats=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),messages=_useState4[0],setMessages=_useState4[1];useEffect(function(){console.log(config.url);function getChats(){return _getChats.apply(this,arguments);}function _getChats(){_getChats=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"\".concat(config.url,\"/chat/all\"),auth_headers());case 2:response=_context.sent;return _context.abrupt(\"return\",response.data.items);case 4:case\"end\":return _context.stop();}},_callee);}));return _getChats.apply(this,arguments);}if(!currentUserExist(user)||chats.length!==0)return;getChats().then(function(value){setChats(value);});},[chats.length,user]);function GetChatMessages(){return _GetChatMessages.apply(this,arguments);}function _GetChatMessages(){_GetChatMessages=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:case\"end\":return _context2.stop();}},_callee2);}));return _GetChatMessages.apply(this,arguments);}return currentUserExist(user)?/*#__PURE__*/_jsxs(\"div\",{id:styles.container,children:[/*#__PURE__*/_jsxs(\"nav\",{children:[/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return clearCurrentUser();},children:/*#__PURE__*/_jsxs(\"h3\",{children:[\"Welcome, \",user.username]})})}),/*#__PURE__*/_jsx(\"div\",{children:chats.map(function(data,index){return/*#__PURE__*/_jsx(SelectChat,{data:data},index);})})]}),/*#__PURE__*/_jsx(\"main\",{})]}):/*#__PURE__*/_jsx(Navigate,{to:\"/auth\"});}export default Main;","map":{"version":3,"names":["React","useEffect","useState","Navigate","axios","auth_headers","clearCurrentUser","currentUser","currentUserExist","styles","SelectChat","config","jsxs","_jsxs","jsx","_jsx","Main","user","_useState","_useState2","_slicedToArray","chats","setChats","_useState3","_useState4","messages","setMessages","console","log","url","getChats","_getChats","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","get","concat","sent","abrupt","data","items","stop","length","then","value","GetChatMessages","_GetChatMessages","_callee2","_callee2$","_context2","id","container","children","onClick","username","map","index","to"],"sources":["C:/Users/Азя/Desktop/chat/frontend/src/components/main/Main.jsx"],"sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport {Navigate} from \"react-router-dom\";\r\nimport axios from \"axios\";\r\n\r\nimport {auth_headers, clearCurrentUser, currentUser, currentUserExist} from \"../../controllers/userController\";\r\nimport styles from '../../css/index.module.css';\r\nimport SelectChat from \"./MainSelectChat\";\r\nimport config from \"../../config\";\r\n\r\n\r\nfunction Main() {\r\n    const user = currentUser();\r\n\r\n    const [chats, setChats] = useState([]);\r\n    const [messages, setMessages] = useState([]);\r\n\r\n    useEffect(() => {\r\n        console.log(config.url);\r\n\r\n        async function getChats() {\r\n            const response = await axios.get(`${config.url}/chat/all`, auth_headers());\r\n\r\n            return response.data.items;\r\n        }\r\n\r\n        if (!currentUserExist(user) || chats.length !== 0)\r\n            return;\r\n        \r\n        getChats().then(value => {setChats(value)});\r\n    }, [chats.length, user]);\r\n\r\n    async function GetChatMessages() {\r\n\r\n    }\r\n\r\n    return (currentUserExist(user)) ? (\r\n        <div id={styles.container}>\r\n            <nav>\r\n                <header>\r\n                    <button onClick={() => clearCurrentUser()}><h3>Welcome, {user.username}</h3></button>\r\n                </header>\r\n                <div>\r\n                    {chats.map((data, index) => <SelectChat key={index} data={data}/>)}\r\n                </div>\r\n            </nav>\r\n            <main>\r\n\r\n            </main>\r\n        </div>\r\n    ) : (<Navigate to=\"/auth\"/>);\r\n}\r\n\r\nexport default Main;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}