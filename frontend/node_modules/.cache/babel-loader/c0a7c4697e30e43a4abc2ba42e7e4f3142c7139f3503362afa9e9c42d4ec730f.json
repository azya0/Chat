{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/\\u0410\\u0437\\u044F/Desktop/chat/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/\\u0410\\u0437\\u044F/Desktop/chat/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import axios from\"axios\";import{setCurrentUser,currentUser,currentUserExist}from\"../controllers/userController\";import{Navigate}from\"react-router-dom\";import styles from'../css/form.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Registration(){function Submit(_x){return _Submit.apply(this,arguments);}function _Submit(){_Submit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data){var response_data,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:data.preventDefault();if(!(data.target[2].value.toLowerCase()!==data.target[3].value.toLowerCase())){_context.next=4;break;}alert('Пароли не совпадают! Пошел нахуй!');return _context.abrupt(\"return\");case 4:response_data={'username':data.target[0].value,'email':data.target[1].value,'password':data.target[2].value};_context.prev=5;_context.next=8;return axios.post('http://localhost:443/auth/register',response_data);case 8:response=_context.sent;_context.next=11;return setCurrentUser(response.data['email'],data.target[2].value);case 11:window.location.href='/';_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](5);console.log(_context.t0);case 17:case\"end\":return _context.stop();}},_callee,null,[[5,14]]);}));return _Submit.apply(this,arguments);}var user=currentUser();return!currentUserExist(user)?/*#__PURE__*/_jsxs(\"form\",{className:styles.form,onSubmit:Submit,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"login\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"repeat password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{children:\"Submit\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return window.location.href='/auth';},children:\"Login\"})]})]}):/*#__PURE__*/_jsx(Navigate,{to:\"/\"});}export default Registration;","map":{"version":3,"names":["axios","setCurrentUser","currentUser","currentUserExist","Navigate","styles","jsx","_jsx","jsxs","_jsxs","Registration","Submit","_x","_Submit","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","response_data","response","wrap","_callee$","_context","prev","next","preventDefault","target","value","toLowerCase","alert","abrupt","post","sent","window","location","href","t0","console","log","stop","user","className","form","onSubmit","children","type","onClick","to"],"sources":["C:/Users/Азя/Desktop/chat/frontend/src/components/Registration.jsx"],"sourcesContent":["import axios from \"axios\";\r\nimport {setCurrentUser, currentUser, currentUserExist} from \"../controllers/userController\";\r\nimport {Navigate} from \"react-router-dom\";\r\n\r\nimport styles from '../css/form.module.css';\r\n\r\nfunction Registration() {\r\n    async function Submit(data) {\r\n        data.preventDefault();\r\n\r\n        if (data.target[2].value.toLowerCase() !== data.target[3].value.toLowerCase()) {\r\n            alert('Пароли не совпадают! Пошел нахуй!');\r\n            return;\r\n        }\r\n\r\n        let response_data = {\r\n            'username': data.target[0].value,\r\n            'email': data.target[1].value,\r\n            'password': data.target[2].value,\r\n        }\r\n\r\n        try {\r\n            const response = await axios.post('http://localhost:443/auth/register', response_data);\r\n\r\n            await setCurrentUser(response.data['email'], data.target[2].value);\r\n\r\n            window.location.href = '/';\r\n        }\r\n        catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n    const user = currentUser();\r\n\r\n    return (!currentUserExist(user)) ? (\r\n        <form className={styles.form} onSubmit={Submit}>\r\n            <h3>username</h3>\r\n            <input type='login'/>\r\n            <h3>email</h3>\r\n            <input type='email'/>\r\n            <h3>password</h3>\r\n            <input type='password'/>\r\n            <h3>repeat password</h3>\r\n            <input type='password'/>\r\n            <div>\r\n                <button>Submit</button>\r\n                <button type='button' onClick={() => window.location.href = '/auth'}>Login</button>\r\n            </div>\r\n        </form>\r\n    ) : (\r\n        <Navigate to='/'/>\r\n    );\r\n}\r\n\r\nexport default Registration;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}