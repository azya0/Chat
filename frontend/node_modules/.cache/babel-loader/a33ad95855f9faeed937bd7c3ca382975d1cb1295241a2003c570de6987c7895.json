{"ast":null,"code":"import config from \"../config\";\nclass WebsocketController {\n  constructor() {\n    this.exist = () => {\n      return this.current !== null;\n    };\n    this.connect = () => {\n      this.current = new WebSocket(`${config.ws_url}/send`);\n    };\n    this.disconnect = () => {\n      if (this.current !== null) {\n        this.current.close();\n        this.current = null;\n      }\n    };\n    this.send = (user_id, message) => {\n      if (this.current === null) return;\n      this.current.send(`${user_id}:${message}`);\n    };\n    this.onmessage = _function => {\n      if (this.current !== null) this.current.onmessage = _function;\n    };\n    this.current = null;\n  }\n}\nlet connection = new WebsocketController();\nexport default connection;","map":{"version":3,"names":["config","WebsocketController","constructor","exist","current","connect","WebSocket","ws_url","disconnect","close","send","user_id","message","onmessage","_function","connection"],"sources":["C:/Users/Азя/Desktop/chat/frontend/src/controllers/websocketController.js"],"sourcesContent":["import config from \"../config\";\r\n\r\n\r\nclass WebsocketController {\r\n    constructor() {\r\n        this.current = null;\r\n    }\r\n\r\n    exist = () => {\r\n        return this.current !== null;\r\n    }\r\n\r\n    connect = () => {\r\n        this.current = new WebSocket(`${config.ws_url}/send`);\r\n    }\r\n\r\n    disconnect = () => {\r\n        if (this.current !== null) {\r\n            this.current.close()\r\n            this.current = null;\r\n        }\r\n    }\r\n\r\n    send = (user_id, message) => {\r\n        if (this.current === null)\r\n            return;\r\n\r\n        this.current.send(`${user_id}:${message}`);\r\n    }\r\n\r\n    onmessage = (_function) => {\r\n        if (this.current !== null)\r\n            this.current.onmessage = _function;\r\n    }\r\n}\r\n\r\nlet connection = new WebsocketController();\r\n\r\nexport default connection;\r\n"],"mappings":"AAAA,OAAOA,MAAM,MAAM,WAAW;AAG9B,MAAMC,mBAAmB,CAAC;EACtBC,WAAWA,CAAA,EAAG;IAAA,KAIdC,KAAK,GAAG,MAAM;MACV,OAAO,IAAI,CAACC,OAAO,KAAK,IAAI;IAChC,CAAC;IAAA,KAEDC,OAAO,GAAG,MAAM;MACZ,IAAI,CAACD,OAAO,GAAG,IAAIE,SAAS,CAAE,GAAEN,MAAM,CAACO,MAAO,OAAM,CAAC;IACzD,CAAC;IAAA,KAEDC,UAAU,GAAG,MAAM;MACf,IAAI,IAAI,CAACJ,OAAO,KAAK,IAAI,EAAE;QACvB,IAAI,CAACA,OAAO,CAACK,KAAK,CAAC,CAAC;QACpB,IAAI,CAACL,OAAO,GAAG,IAAI;MACvB;IACJ,CAAC;IAAA,KAEDM,IAAI,GAAG,CAACC,OAAO,EAAEC,OAAO,KAAK;MACzB,IAAI,IAAI,CAACR,OAAO,KAAK,IAAI,EACrB;MAEJ,IAAI,CAACA,OAAO,CAACM,IAAI,CAAE,GAAEC,OAAQ,IAAGC,OAAQ,EAAC,CAAC;IAC9C,CAAC;IAAA,KAEDC,SAAS,GAAIC,SAAS,IAAK;MACvB,IAAI,IAAI,CAACV,OAAO,KAAK,IAAI,EACrB,IAAI,CAACA,OAAO,CAACS,SAAS,GAAGC,SAAS;IAC1C,CAAC;IA5BG,IAAI,CAACV,OAAO,GAAG,IAAI;EACvB;AA4BJ;AAEA,IAAIW,UAAU,GAAG,IAAId,mBAAmB,CAAC,CAAC;AAE1C,eAAec,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}